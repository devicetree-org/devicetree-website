<HTML>
<body bgcolor="#ffffff" text="#000000"
link="#0000ff" vlink="#ff0000" alink="ff0000">

<TITLE>
CHRP ISA Keyboard/Mouse Controller Device Binding
</TITLE>

<center>
<H1>
CHRP<TT>(TM)</TT> ISA Keyboard/Mouse Controller
<br>
Device Binding to
<br>
<br>
IEEE 1275-1994<br>
Standard for Boot (Initialization,<br>
Configuration) Firmware<br>
</H1>
<br>

Revision: 1.0 Unapproved DRAFT
<br>
<br>

May 6,1996
<br>
</center>
<HR><H2>Table of Contents</H2>

<UL>
<A HREF="8042-1_0d.html#HDR0"><B>1.   Purpose of this Device Binding</B></A>
<BR>

<A HREF="8042-1_0d.html#HDR1"><B>2.   Revision History</B></A>
<BR>

<A HREF="8042-1_0d.html#HDR2"><B>3.   References</B></A>
<BR>

<A HREF="8042-1_0d.html#HDR3"><B>4.   Definition of Terms</B></A>
<BR>

<A HREF="8042-1_0d.html#HDR4"><B>5.   Device Characteristics (Informative)</B></A>

<UL>
<A HREF="8042-1_0d.html#HDR5">5.1.   Address Formats and Representations</A>

<UL>
<A HREF="8042-1_0d.html#HDR6">5.1.1.   Physical Address Format: Numerical Representation</A>
<BR>

<A HREF="8042-1_0d.html#HDR7">5.1.2.   Physical Address Format: Text Representation</A>
</UL>
</UL>

<A HREF="8042-1_0d.html#HDR8"><B>6.   Device-specific Configuration Variables</B></A>
<BR>

<A HREF="8042-1_0d.html#HDR9"><B>7.   Device Nodes</B></A>

<UL>
<A HREF="8042-1_0d.html#HDR10">7.1.   Properties</A>

<UL>
<A HREF="8042-1_0d.html#HDR11">7.1.1.   Open Firmware-defined Properties for Device Nodes</A>
<BR>

<A HREF="8042-1_0d.html#HDR12">7.1.2.   Device-specific Properties for Device Nodes</A>
</UL>

<A HREF="8042-1_0d.html#HDR13">7.2.   Methods</A>

<UL>
<A HREF="8042-1_0d.html#HDR14">7.2.1.   Open Firmware-defined Methods for Device Nodes</A>

<UL>
<A HREF="8042-1_0d.html#HDR15">7.2.1.1.   Device Arguments for &quot;Open&quot; Method</A>
</UL>

<A HREF="8042-1_0d.html#HDR16">7.2.2.    Device-specific Methods for Device Nodes</A>
</UL>
</UL>

<A HREF="8042-1_0d.html#HDR17"><B>8.   Child Nodes</B></A>

<UL>
<A HREF="8042-1_0d.html#HDR18">8.1.   Properties</A>

<UL>
<A HREF="8042-1_0d.html#HDR19">8.1.1.   Open Firmware-defined Properties for Child Nodes</A>
<BR>

<A HREF="8042-1_0d.html#HDR20">8.1.2.   Device-specific Properties for Child Nodes</A>
<BR>

<A HREF="8042-1_0d.html#HDR21">8.1.3.    Device-specific Methods for Child Nodes</A>
</UL>
</UL>

<A HREF="8042-1_0d.html#HDR22"><B>9.   User Interface Commands</B></A>

<UL>
<A HREF="8042-1_0d.html#HDR23">9.1.   Open Firmware-defined User Interface Commands</A>
<BR>

<A HREF="8042-1_0d.html#HDR24">9.2.   Device-specific User Interface Commands</A>
</UL>

<A HREF="8042-1_0d.html#HDR25"><B>10.   Device State</B></A>

<UL>
<A HREF="8042-1_0d.html#HDR26">10.1.   Device State When Client is Started</A>
<BR>

<A HREF="8042-1_0d.html#HDR27">10.2.   Device State Required When Client Calls Open Firmware</A>
</UL>

<A HREF="8042-1_0d.html#HDR28"><B>11.   Other Commentary</B></A>
</UL>


<HR><!-- This file was created with the fm2html filter.The filter is copyright Norwegian Telecom Research and was programmed by Jon Stephenson von Tetzchner.  --><H2><A NAME="HDR0">1.   Purpose of this Device Binding</A></H2>
This document specifies the application of Open Firmware to the PowerPC Common Hardware Reference Platform (CHRP) ISA keyboard/mouse controller, including device-specific requirements and practices for initialization, properties, and methods. This device shall be a child of an ISA or EISA Bus Node.<p>
<H2><A NAME="HDR1">2.   Revision History</A></H2>
Revision 1.0 Unapproved DRAFT     ,   Initial revision. Jordan Brown, Sunsoft and John Kingman, IBM editors<p>
<H2><A NAME="HDR2">3.   References</A></H2>
This Open Firmware System binding standard <I>shall</I> be used in conjunction with the following publications. When the following standards are superseded by an approved revision, the revision <I>shall</I> apply.<p>
<DL COMPACT>
<DT><A NAME="REF69242">[1]  </A><DD><I>IEEE Std 1275-1994 Standard for Boot (Initialization, Configuration) Firmware, Core Practices and Requirements</I>.
<DT><A NAME="REF14175">[2]  </A><DD><I>Core Errata, IEEE P1275.7/D4.</I>
<DT><A NAME="REF34886">[3]  </A><DD><I>ISA/EISA/ISA-PnP binding to: IEEE Std 1275-1994, Standard for Boot (Initialization, Configuration) Firmware</I>.
<DT><A NAME="REF86131">[4]  </A><DD><I>Device Support Extensions to: IEEE Std 1275-1994, Standard for Boot (Initialization, Configuration) Firmware</I>.
<DT><A NAME="REF16160">[5]  </A><DD><I>PowerPC Microprocessor Common Hardware Reference Platform: I/O Device Reference</I>. This document describes the PowerPC Common Hardware Reference Platform (CHRP) System Standard I/O Devices; hardware registers, register locations, and hardware attributes.
<DT><A NAME="REF12590">[6]  </A><DD><I>Open Firmware Recommended Practice: Interrupt Mapping</I>.
<DT><A NAME="REF72043">[7]  </A><DD><I>Open Firmware Recommended Practice: Generic Names</I>.
<DT><A NAME="REF92630">[8]  </A><DD><I>PowerPC Microprocessor Common Hardware Reference Platform binding to: IEEE Std 1275-1994, Standard for Boot (Initialization, Configuration) Firmware</I>.
</DL>
<H2><A NAME="HDR3">4.   Definition of Terms</A></H2>
<B>EISA</B>: Extended Industry Standard Architecture<p>
<B>ISA</B>: Industry Standard Architecture<p>
<H2><A NAME="HDR4">5.   Device Characteristics (Informative)</A></H2>
The keyboard/mouse controller is actually a microcontroller (commonly based on an 8042 microcontroller) which monitors the keyboard and mouse for input, provides data through a separate I/O port for the keyboard and mouse and signals that such data is available with an interrupt.<p>
<H3><A NAME="HDR5">5.1.   Address Formats and Representations</A></H3>
This section describes the physical address representation.<p>
<H4><A NAME="HDR6">5.1.1.   Physical Address Format: Numerical Representation</A></H4>
The numerical representation of a keyboard or mouse address is a binary integer in the range '0' to '1'.<p>
<H4><A NAME="HDR7">5.1.2.   Physical Address Format: Text Representation</A></H4>
The textual representation of a keyboard or mouse address is an ASCII &quot;0&quot; or an ASCII &quot;1.&quot;<p>
<H2><A NAME="HDR8">6.   Device-specific Configuration Variables</A></H2>
None.<p>
<H2><A NAME="HDR9">7.   Device Nodes</A></H2>
<H3><A NAME="HDR10">7.1.   Properties</A></H3>
As specified in <A HREF="8042-1_0d.html#REF69242">[1]</A>, <A HREF="8042-1_0d.html#REF34886">[3]</A> and <A HREF="8042-1_0d.html#REF92630">[8]</A>, with the following additions or modifications. This node shall not have a &quot;ranges&quot; property.<p>
<H4><A NAME="HDR11">7.1.1.   Open Firmware-defined Properties for Device Nodes</A></H4>
<H4>  &quot;name&quot;    S</H4>
Standard <I>property name</I>, specifies the generic name of the device. <p>
The meaning of this property is as defined in Open Firmware core document <A HREF="8042-1_0d.html#REF69242">[1]</A>, as modified by the <I>Generic Names Recommended Practice</I><A HREF="8042-1_0d.html#REF72043">[7]</A>. The value for nodes described by this specification shall be &quot;8042&quot;.<p>
<H4>  &quot;device_type&quot;    S</H4>
Standard <I>property name</I> to define the device's implemented interface. <p>
The meaning of this property is as defined in the Open Firmware core document <A HREF="8042-1_0d.html#REF69242">[1]</A>. The value for nodes described by this specification shall be &quot;8042&quot;.<p>
<H4>  &quot;compatible&quot;    S</H4>
Standard <I>property name</I>, specifies device names with which this device is compatible. <p>
The meaning of this property is as defined in Open Firmware, as modified by the <I>Generic Names Recommended Practice</I> <A HREF="8042-1_0d.html#REF72043">[7]</A>. As described in those documents, the entries are a list of device names with which this device is compatible, starting with the name of the device itself and progressing through successively less precise and possibly less functional compatible devices.<p>
The value of this property shall include &quot;chrp,8042&quot;<p>
Additional entries may be supplied, at their appropriate position in the list, to describe devices with which this device is compatible.<p>
<H4>  &quot;reg&quot;    S</H4>
Standard <I>property name</I> to define the package's registers. <p>
The meaning of this property is as defined in the Open Firmware core document <A HREF="8042-1_0d.html#REF69242">[1]</A>. It describes the device's register set. The values which shall be assigned to this property are explained in the <I>ISA/EISA/ISA-PnP binding</I><A HREF="8042-1_0d.html#REF34886">[3]</A> and the <I>I/O Device Reference</I><A HREF="8042-1_0d.html#REF16160">[5]</A>.<p>
<H4>  &quot;interrupts&quot;    S</H4>
Standard <I>property name</I> to define a package's interrupts. <p>
The meaning of this property is as defined in the <I>Interrupt Mapping Recommended Practice</I> <A HREF="8042-1_0d.html#REF12590">[6]</A>. The values assigned to this property are explained in the <I>ISA/EISA/ISA-PnP binding</I><A HREF="8042-1_0d.html#REF34886">[3]</A> and the <I>I/O Device Reference</I><A HREF="8042-1_0d.html#REF16160">[5]</A>. This device may have up to two interrupts assigned to it. The components of the array shall correspond with the interrupts assigned to the children of this node such that a child's reg property when used as an index into the array shall yield the appropriate interrupt value for that child.<p>
<H4>  &quot;#address-cells&quot;    S</H4>
Standard <I>prop-name</I> to define the number of cells required to represent the physical addresses for the children of this node.<p>
<I>prop-encoded-array</I>: Integer constant 1, encoded as with encode-int.<p>
The value of &quot;#address-cells&quot; for this node <I>shall</I> be 1.<p>
<H4>  &quot;#size-cells&quot;    S</H4>
Standard <I>prop-name </I>to define the number of cells necessary to represent the length of a physical address range.<p>
<I>prop-encoded-array</I>: Integer constant 0, encoded as with <B>encode-int.</B><p>
The value of &quot;#size-cells&quot; for this node shall be 0 because the children of this node do not consume any physical address space.<p>
<H4><A NAME="HDR12">7.1.2.   Device-specific Properties for Device Nodes</A></H4>
None.<p>
<H3><A NAME="HDR13">7.2.   Methods</A></H3>
<H4><A NAME="HDR14">7.2.1.   Open Firmware-defined Methods for Device Nodes</A></H4>
As specified in <A HREF="8042-1_0d.html#REF69242">[1]</A> and <A HREF="8042-1_0d.html#REF34886">[3]</A>, without addition or modification.<p>
<H5><A NAME="HDR15">7.2.1.1.   Device Arguments for &quot;Open&quot; Method</A></H5>
As specified in <A HREF="8042-1_0d.html#REF69242">[1]</A> and <A HREF="8042-1_0d.html#REF34886">[3]</A>, without addition or modification.<p>
<H4><A NAME="HDR16">7.2.2.    Device-specific Methods for Device Nodes</A></H4>
None.<p>
<H2><A NAME="HDR17">8.   Child Nodes</A></H2>
<H3><A NAME="HDR18">8.1.   Properties</A></H3>
As specified in <A HREF="8042-1_0d.html#REF69242">[1]</A> and <A HREF="8042-1_0d.html#REF34886">[3]</A>, with the following additions or modifications.<p>
<H4><A NAME="HDR19">8.1.1.   Open Firmware-defined Properties for Child Nodes</A></H4>
As specified in <A HREF="8042-1_0d.html#REF69242">[1]</A> and <A HREF="8042-1_0d.html#REF34886">[3]</A>, with the following additions or modifications.<p>
<H4>  &quot;name&quot;    S</H4>
Standard <I>property name</I>, specifies the generic name of the device. <p>
The meaning of this property is as defined in Open Firmware core document <A HREF="8042-1_0d.html#REF69242">[1]</A>, as modified by the Generic Names Recommended Practice. The value for nodes described by this specification shall be &quot;keyboard&quot; for an ISA keyboard device node, and &quot;mouse&quot; for an ISA mouse device node.<p>
<H4>  &quot;device_type&quot;    S</H4>
Standard <I>property name</I> to define the device's implemented interface. <p>
The meaning of this property is as defined in the Open Firmware core document <A HREF="8042-1_0d.html#REF69242">[1]</A>. The value for nodes described by this specification shall be &quot;keyboard&quot; for an ISA keyboard device node, or &quot;mouse&quot; for an ISA mouse device node.<p>
<H4>  &quot;compatible&quot;    S</H4>
Standard <I>property name</I>, specifies device names with which this device is compatible. <p>
The meaning of this property is as defined in Open Firmware, as modified by the Generic Names Recommended Practice. As described in those documents, the entries are a list of device names with which this device is compatible, starting with the name of the device itself and progressing through successively less precise and possibly less functional compatible devices.<p>
The value of this property shall be &quot;pnpPNP,303&quot; for an ISA keyboard device node.<p>
The value of this property shall be &quot;pnpPNP,f03&quot; for an ISA mouse device node.<p>
Additional entries may be supplied, at their appropriate position in the list, to describe devices with which this device is compatible.<p>
<H4>  &quot;reg&quot;    S</H4>
<I>prop-name</I>, specifies the number of this device. <p>
<I>prop-encoded-array</I>: An integer, encoded with <B>encode-int</B>. <p>
The value of this property shall be 0 for a keyboard node and 1 for a mouse node.<p>
<H4><A NAME="HDR20">8.1.2.   Device-specific Properties for Child Nodes</A></H4>
As specified in<I> </I><A HREF="8042-1_0d.html#REF86131">[4]</A> without addition or modification.<p>
<H4><A NAME="HDR21">8.1.3.    Device-specific Methods for Child Nodes</A></H4>
As specified in<I> </I><A HREF="8042-1_0d.html#REF86131">[4]</A> without addition or modification.<p>
<H2><A NAME="HDR22">9.   User Interface Commands</A></H2>
<H3><A NAME="HDR23">9.1.   Open Firmware-defined User Interface Commands</A></H3>
None.<p>
<H3><A NAME="HDR24">9.2.   Device-specific User Interface Commands</A></H3>
None.<p>
<H2><A NAME="HDR25">10.   Device State</A></H2>
<H3><A NAME="HDR26">10.1.   Device State When Client is Started</A></H3>
For devices not selected as Open Firmware's &quot;console input device&quot; or &quot;console output device&quot; device, the initial state is undefined. To comply with this binding, the device's outputs and interrupts shall be &quot;tri-stated&quot; when the client is started.<p>
For devices which are selected as Open Firmware's &quot;console input device&quot; or &quot;console output device&quot; device, the device shall be initialized appropriately for the device to which it is attached.<p>
Refer to <A HREF="8042-1_0d.html#REF16160">[5]</A> for more information on the state of this device when the client is started.<p>
<H3><A NAME="HDR27">10.2.   Device State Required When Client Calls Open Firmware</A></H3>
For devices not selected as Open Firmware's &quot;console input device&quot; or &quot;console output device&quot; device, there is no requirement.<p>
For devices selected as Open Firmware's &quot;console input device&quot; or &quot;console output device&quot; device, the state should be unmodified from the initial state on client start-up.<p>
Note:  If the device is in a different state when the client calls Open Firmware, unpredictable behavior may result if Open Firmware accepts input or generates output. Clients changing the device state should either restore the original state before calling Open Firmware or should avoid using Open Firmware features requiring user interaction. Changing the device state is likely to render Open Firmware unusable for debugging purposes.<p>
<H2><A NAME="HDR28">11.   Other Commentary</A></H2>
<A NAME="ENDFILE"><PRE> </PRE></A>
</HTML>
