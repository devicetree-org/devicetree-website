<HTML>
<body bgcolor="#ffffff" text="#000000"
link="#0000ff" vlink="#ff0000" alink="ff0000">

<TITLE>
CHRP ISA Floppy Disk Controller Device Binding
</TITLE>

<center>
<H1>
CHRP<TT>(TM)</TT> ISA Floppy Disk Controller
<br>
Device Binding to
<br>
<br>
IEEE 1275-1994<br>
Standard for Boot (Initialization,<br>
Configuration) Firmware<br>
</H1>
<br>

Revision: 1.0 Unapproved DRAFT
<br>
<br>

May 6,1996
<br>
</center>
<HR><H2>Table of Contents</H2>

<UL>
<A HREF="fdc-1_0d.html#HDR0"><B>1.   Purpose of this Device Binding</B></A>
<BR>

<A HREF="fdc-1_0d.html#HDR1"><B>2.   Revision History</B></A>
<BR>

<A HREF="fdc-1_0d.html#HDR2"><B>3.   References</B></A>
<BR>

<A HREF="fdc-1_0d.html#HDR3"><B>4.   Definition of Terms</B></A>
<BR>

<A HREF="fdc-1_0d.html#HDR4"><B>5.   Device Characteristics (Informative)</B></A>

<UL>
<A HREF="fdc-1_0d.html#HDR5">5.1.   Address Formats and Representations</A>

<UL>
<A HREF="fdc-1_0d.html#HDR6">5.1.1.   Physical Address Format: Numerical Representation</A>
<BR>

<A HREF="fdc-1_0d.html#HDR7">5.1.2.   Physical Address Format: Text Representation</A>
</UL>
</UL>

<A HREF="fdc-1_0d.html#HDR8"><B>6.   Device-specific Configuration Variables</B></A>
<BR>

<A HREF="fdc-1_0d.html#HDR9"><B>7.   Device Nodes</B></A>

<UL>
<A HREF="fdc-1_0d.html#HDR10">7.1.   Properties</A>

<UL>
<A HREF="fdc-1_0d.html#HDR11">7.1.1.   Open Firmware-defined Properties for Device Nodes.</A>
<BR>

<A HREF="fdc-1_0d.html#HDR12">7.1.2.   Device-specific Properties for Device Nodes</A>
<BR>

<A HREF="fdc-1_0d.html#HDR13">7.1.3.   Open Firmware-defined Methods for Device Nodes</A>

<UL>
<A HREF="fdc-1_0d.html#HDR14">7.1.3.1.   Device Arguments for &quot;Open&quot; Method</A>
</UL>

<A HREF="fdc-1_0d.html#HDR15">7.1.4.    Device-specific Methods for Device Nodes</A>
</UL>
</UL>

<A HREF="fdc-1_0d.html#HDR16"><B>8.   Child Nodes</B></A>

<UL>
<A HREF="fdc-1_0d.html#HDR17">8.1.   Properties</A>

<UL>
<A HREF="fdc-1_0d.html#HDR18">8.1.1.   Open Firmware-defined Properties for Child Nodes</A>
<BR>

<A HREF="fdc-1_0d.html#HDR19">8.1.2.   Device-specific Properties for Child Nodes</A>
<BR>

<A HREF="fdc-1_0d.html#HDR20">8.1.3.    Device-specific Methods for Child Nodes</A>
</UL>
</UL>

<A HREF="fdc-1_0d.html#HDR21"><B>9.   User Interface Commands</B></A>

<UL>
<A HREF="fdc-1_0d.html#HDR22">9.1.   Open Firmware-defined User Interface Commands</A>
<BR>

<A HREF="fdc-1_0d.html#HDR23">9.2.   Device-specific User Interface Commands</A>
</UL>

<A HREF="fdc-1_0d.html#HDR24"><B>10.   Device State</B></A>

<UL>
<A HREF="fdc-1_0d.html#HDR25">10.1.   Device State When Client is Started</A>
<BR>

<A HREF="fdc-1_0d.html#HDR26">10.2.   Device State Required When Client Calls Open Firmware</A>
</UL>

<A HREF="fdc-1_0d.html#HDR27"><B>11.   Other Commentary</B></A>
</UL>


<HR><!-- This file was created with the fm2html filter.The filter is copyright Norwegian Telecom Research and was programmed by Jon Stephenson von Tetzchner.  --><H2><A NAME="HDR0">1.   Purpose of this Device Binding</A></H2>
This document specifies the application of Open Firmware to the PowerPC Common Hardware Reference Platform (CHRP) ISA Floppy Controller, including device-specific requirements and practices for initialization, properties, and methods. This device shall be a child of an ISA or EISA Bus Node.<p>
<H2><A NAME="HDR1">2.   Revision History</A></H2>
Revision 1.0 Unapproved DRAFT      ,   Initial revision. Jordan Brown, Sunsoft and John Kingman, IBM editors<p>
<H2><A NAME="HDR2">3.   References</A></H2>
This Open Firmware System binding standard <I>shall</I> be used in conjunction with the following publications. When the following standards are superseded by an approved revision, the revision <I>shall</I> apply.<p>
<DL COMPACT>
<DT><A NAME="REF69242">[1]  </A><DD><I>IEEE Std 1275-1994 Standard for Boot (Initialization, Configuration) Firmware, Core Practices and Requirements</I>.
<DT><A NAME="REF14175">[2]  </A><DD><I>Core Errata, IEEE P1275.7/D4.</I>
<DT><A NAME="REF34886">[3]  </A><DD><I>ISA/EISA/ISA-PnP binding to: IEEE Std 1275-1994, Standard for Boot (Initialization, Configuration) Firmware</I>.
<DT><A NAME="REF86131">[4]  </A><DD><I>Device Support Extensions to: IEEE Std 1275-1994, Standard for Boot (Initialization, Configuration) Firmware</I>.
<DT><A NAME="REF16160">[5]  </A><DD><I>PowerPC Microprocessor Common Hardware Reference Platform: I/O Device Reference</I>. This document describes the PowerPC Common Hardware Reference Platform (CHRP) System Standard I/O Devices; hardware registers, register locations, and hardware attributes.
<DT><A NAME="REF92630">[6]  </A><DD><I>PowerPC Microprocessor Common Hardware Reference Platform binding to: IEEE Std 1275-1994, Standard for Boot (Initialization, Configuration) Firmware</I>.
<DT><A NAME="REF12590">[7]  </A><DD><I>Open Firmware Recommended Practice: Interrupt Mapping</I>.
<DT><A NAME="REF89049">[8]  </A><DD><I>Open Firmware Recommended Practice: Generic Names.</I>
</DL>
<H2><A NAME="HDR3">4.   Definition of Terms</A></H2>
<B>EISA</B>: Extended Industry Standard Architecture<p>
<B>ISA</B>: Industry Standard Architecture<p>
<H2><A NAME="HDR4">5.   Device Characteristics (Informative)</A></H2>
The ISA Floppy Controller generally controls one or two floppy disk drives. The controller supports both high- and low-density diskette media. Floppy controllers in the ISA world have traditionally supported two operational modes - PC/AT and PS/2. CHRP<A HREF="fdc-1_0d.html#REF16160">[5]</A> requires PS/2 mode controllers.<p>
<H3><A NAME="HDR5">5.1.   Address Formats and Representations</A></H3>
This section describes the physical address representation.<p>
<H4><A NAME="HDR6">5.1.1.   Physical Address Format: Numerical Representation</A></H4>
The numerical representation of a floppy device address is a binary integer, in the range '0' to '1'.<p>
<H4><A NAME="HDR7">5.1.2.   Physical Address Format: Text Representation</A></H4>
The textual representation of a floppy device address is an ASCII &quot;0&quot; or an ASCII &quot;1.&quot;<p>
<H2><A NAME="HDR8">6.   Device-specific Configuration Variables</A></H2>
None.<p>
<H2><A NAME="HDR9">7.   Device Nodes</A></H2>
<H3><A NAME="HDR10">7.1.   Properties</A></H3>
As specified in <A HREF="fdc-1_0d.html#REF69242">[1]</A>, <A HREF="fdc-1_0d.html#REF34886">[3]</A> and <A HREF="fdc-1_0d.html#REF92630">[6]</A>, with the following additions or modifications. This node shall not have a &quot;ranges&quot; property.<p>
<H4><A NAME="HDR11">7.1.1.   Open Firmware-defined Properties for Device Nodes.</A></H4>
<H4>  &quot;name&quot;    S</H4>
Standard <I>property name</I>, specifies the generic name of the device. <p>
The meaning of this property is as defined in Open Firmware core document <A HREF="fdc-1_0d.html#REF69242">[1]</A>, as modified by the <I>Generic Names Recommended Practice</I> <A HREF="fdc-1_0d.html#REF89049">[8]</A>. The value for nodes described by this specification shall be &quot;fdc&quot;.<p>
<H4>  &quot;device_type&quot;    S</H4>
Standard <I>property name</I> to define the device's implemented interface. <p>
The meaning of this property is as defined in the Open Firmware core document <A HREF="fdc-1_0d.html#REF69242">[1]</A>. The value for nodes described by this specification shall be &quot;fdc&quot;.<p>
<H4>  &quot;compatible&quot;    S</H4>
Standard <I>property name</I>, specifies device names with which this device is compatible. <p>
The meaning of this property is as defined in Open Firmware, as modified by the <I>Generic Names Recommended Practice</I> <A HREF="fdc-1_0d.html#REF89049">[8]</A>. As described in those documents, the entries are a list of device names with which this device is compatible, starting with the name of the device itself and progressing through successively less precise and possibly less functional compatible devices.<p>
The value of this property shall include &quot;pnpPNP,700.&quot; If the controller supports auto-eject this property shall also include &quot;chrp,fdc&quot; preceding &quot;pnpPNP,700.&quot;<p>
Additional entries may be supplied, at their appropriate position in the list, to describe devices with which this device is compatible.<p>
<H4>  &quot;reg&quot;    S</H4>
Standard <I>property name</I> to define the package's registers. <p>
The meaning of this property is as defined in the Open Firmware core document <A HREF="fdc-1_0d.html#REF69242">[1]</A>. It describes the device's register set. The values which shall be assigned to this property are explained in the <I>ISA/EISA/ISA-PnP binding</I><A HREF="fdc-1_0d.html#REF34886">[3]</A> and the <I>I/O Device Reference</I><A HREF="fdc-1_0d.html#REF16160">[5]</A><p>
<H4>  &quot;interrupts&quot;    S</H4>
Standard <I>property name</I> to define a package's interrupts. <p>
The meaning of this property is as defined in the <I>Interrupt Mapping Recommended Practice</I> <A HREF="fdc-1_0d.html#REF12590">[7]</A>. The values assigned to this property are explained in the <I>ISA/EISA/ISA-PnP binding</I><A HREF="fdc-1_0d.html#REF34886">[3]</A> and the <I>I/O Device Reference</I><A HREF="fdc-1_0d.html#REF16160">[5]</A>.<p>
<H4>  &quot;#address-cells&quot;    S</H4>
Standard <I>prop-name</I> to define the number of cells required to represent the physical addresses for the children of this node.<p>
<I>prop-encoded-array</I>: Integer constant 1, encoded as with encode-int.<p>
The value of &quot;#address-cells&quot; for this node <I>shall</I> be 1.<p>
<H4>  &quot;#size-cells&quot;    S</H4>
Standard <I>prop-name </I>to define the number of cells necessary to represent the length of a physical address range.<p>
<I>prop-encoded-array</I>: Integer constant 0, encoded as with <B>encode-int.</B><p>
The value of &quot;#size-cells&quot; for this node shall be 0 because the children of this node do not consume any physical address space.<p>
<H4>  &quot;dma&quot;    S</H4>
Standard <I>property name</I> to define a package's DMA channels. <p>
The values assigned to this property are explained in the <I>ISA/EISA/ISA-PnP binding</I><A HREF="fdc-1_0d.html#REF34886">[3]</A> and the <I>I/O Device Reference</I><A HREF="fdc-1_0d.html#REF16160">[5]</A>. This device shall have one DMA channel assigned to it.<p>
<H4>  &quot;auto-eject&quot;    S</H4>
<I>property name</I> to identify that the auto-eject functionality is supported.<p>
This property shall be present if the controller supports the auto-eject function, otherwise it shall be absent.<p>
<H4><A NAME="HDR12">7.1.2.   Device-specific Properties for Device Nodes</A></H4>
As specified in <A HREF="fdc-1_0d.html#REF34886">[3]</A>, without addition or modification.<p>
<H4><A NAME="HDR13">7.1.3.   Open Firmware-defined Methods for Device Nodes</A></H4>
As specified in <A HREF="fdc-1_0d.html#REF69242">[1]</A> and <A HREF="fdc-1_0d.html#REF34886">[3]</A>, without addition or modification.<p>
<H5><A NAME="HDR14">7.1.3.1.   Device Arguments for &quot;Open&quot; Method</A></H5>
As specified in <A HREF="fdc-1_0d.html#REF86131">[4]</A> and <A HREF="fdc-1_0d.html#REF92630">[6]</A>, without addition or modification.<p>
<H4><A NAME="HDR15">7.1.4.    Device-specific Methods for Device Nodes</A></H4>
As specified in <A HREF="fdc-1_0d.html#REF86131">[4]</A> and <A HREF="fdc-1_0d.html#REF92630">[6]</A>, without addition or modification.<p>
<H2><A NAME="HDR16">8.   Child Nodes</A></H2>
<H3><A NAME="HDR17">8.1.   Properties</A></H3>
As specified in <A HREF="fdc-1_0d.html#REF69242">[1]</A> and <A HREF="fdc-1_0d.html#REF34886">[3]</A>, with the following additions or modifications.<p>
<H4><A NAME="HDR18">8.1.1.   Open Firmware-defined Properties for Child Nodes</A></H4>
<H4>  &quot;name&quot;    S</H4>
Standard <I>property name</I>, specifies the generic name of the device. <p>
The meaning of this property is as defined in Open Firmware core document <A HREF="fdc-1_0d.html#REF69242">[1]</A>, as modified by the Generic Names Recommended Practice. The value for nodes described by this specification shall be &quot;disk&quot;.<p>
<H4>  &quot;device_type&quot;    S</H4>
Standard <I>property name</I> to define the device's implemented interface. <p>
The meaning of this property is as defined in the Open Firmware core document <A HREF="fdc-1_0d.html#REF69242">[1]</A>. The value for nodes described by this specification shall be &quot;block&quot;.<p>
<H4>  &quot;reg&quot;    S</H4>
<I>prop-name</I>, specifies the number of this floppy drive. <p>
<I>prop-encoded-array</I>: An integer, encoded with <B>encode-int</B>. <p>
The value of this is property is the drive number, in the range of 0-1.<p>
<H4><A NAME="HDR19">8.1.2.   Device-specific Properties for Child Nodes</A></H4>
None.<p>
<H4><A NAME="HDR20">8.1.3.    Device-specific Methods for Child Nodes</A></H4>
As specified in <A HREF="fdc-1_0d.html#REF86131">[4]</A>, with the following addition for a controller which supports auto-eject:<p>
<H4>  eject  ( -- )  M</H4>
<B>eject </B>shall activate the media eject function in the drive.<p>
<H2><A NAME="HDR21">9.   User Interface Commands</A></H2>
<H3><A NAME="HDR22">9.1.   Open Firmware-defined User Interface Commands</A></H3>
None.<p>
<H3><A NAME="HDR23">9.2.   Device-specific User Interface Commands</A></H3>
None.<p>
<H2><A NAME="HDR24">10.   Device State</A></H2>
<H3><A NAME="HDR25">10.1.   Device State When Client is Started</A></H3>
This device shall be initialized with its address, DMA and interrupt assigned and enabled when the client is started.<p>
Refer to <A HREF="fdc-1_0d.html#REF16160">[5]</A> for more information on the state of this device when the client is started.<p>
<H3><A NAME="HDR26">10.2.   Device State Required When Client Calls Open Firmware</A></H3>
For devices not selected as Open Firmware's &quot;console input device&quot; or &quot;console output device&quot; device, there is no requirement. Typically, this device is unsuitable for use as an Open Firmware console input or console output device.<p>
<H2><A NAME="HDR27">11.   Other Commentary</A></H2>
<A NAME="ENDFILE"><PRE> </PRE></A>
</HTML>
